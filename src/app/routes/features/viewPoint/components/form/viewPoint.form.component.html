<!-- <nb-card>
  <nb-card-header>
    {{title}}
  </nb-card-header>
  <nb-card-body>
    <form #form="ngForm" class='vp-form' autocomplete="nope">
      <nb-tabset>           
        <nb-tab tabTitle='Location'>
          <div class="form-group row">
            <div class="col-4">
              <label for="input-latitude">Latitude</label>
              <input #latitude='ngModel' type="text" id='input-latitude' placeholder="Lat." class="form-control" [(ngModel)]="newEntity.latitude"
                name='latitude' required [disabled]='true' [class.danger]="form.touched && !hasPosition()" />
            </div>
            <div class="col-4">
              <label for="input-longtitude">Longtitude</label>
              <input #longtitude='ngModel' type="text" id='input-longtitude' placeholder="Lng." class="form-control" [(ngModel)]="newEntity.longtitude"
                name='longtitude' required [disabled]='true' [class.danger]="form.touched && !hasPosition()" />
            </div>
            <button (click)='openMap()' type="button" [disabled]='!hasCity()' class="btn btn-success btn-icon" style='align-self: flex-end;'>
              <i class="nb-location"></i>
            </button>
            <small class="form-text error" *ngIf="form.touched && !hasPosition()">
              Position is required!
            </small>
          </div>
        </nb-tab>
        <nb-tab tabTitle='Images'>
          <div class="form-group">
            <label for="input-thumnail">View Point Thumbnail</label>
            <div btFileDrop id='input-thumnail' [multiple]='false' [ngClass]="{'nv-file-over': hasThumbnailDropZoneOver}" (fileOver)="thumbnailFileOver($event)"
              (onFileDrop)="thumbnailFileDropped($event)" name='thumbnail' [uploader]="thumbnailUploader" class="my-drop-zone"
              [class.danger]="!hasThumbnailFile()">
              <div style='margin-left: 10px;' *ngIf='!hasThumbnailFile()'>Drop Thumbnail File</div>
              <img *ngIf='hasThumbnailFile()' [src]='newEntity.thumbnail' />
            </div>
            <small style='margin-left: 0;margin-bottom: 20px;' class="form-text error" *ngIf="!hasThumbnailFile()">
              Thumbnail is required!
            </small>
          </div>
          <div class="form-group">
            <label for="input-images">View Point Images</label>
            <div btFileDrop id='input-images' [multiple]='true' [ngClass]="{'nv-file-over': hasImagesDropZoneOver}" (fileOver)="imageFileOver($event)"
              (onFileDrop)="imageFileDropped($event)" name='images' [uploader]="imagesUploader" class="my-drop-zone" [class.danger]="!hasImageFiles()">
              <div style='margin-left: 10px;' *ngIf='!hasImageFiles()'>Drop Image Files</div>
              <ng-container *ngIf='hasImageFiles()'>
                <img *ngFor='let image of newEntity.images' [src]='image' [nbContextMenu]="getMenuItem(image)" />
              </ng-container>
            </div>
            <small style='margin-left: 0;margin-bottom: 20px;' class="form-text error" *ngIf="!hasImageFiles()">
              Image is required!
            </small>
          </div>
        </nb-tab>
        <nb-tab tabTitle='Others'>
          <div class="form-group">
            <label for="input-tips">Tips</label>
            <textarea style='resize: none;' #tips='ngModel' type="text" id='input-tips' placeholder="Tips" class="form-control" [(ngModel)]="newEntity.tips"
              name='tips'>
            </textarea>
          </div>
          <div class="form-group">
            <label for="input-description">Description</label>
            <textarea style='height: 180px;resize: none;' #description='ngModel' placeholder="Description" type="text" id='input-description'
              class="form-control" [(ngModel)]="newEntity.description" name='description'>
            </textarea>
          </div>
        </nb-tab>
      </nb-tabset>
      <button (click)='action()' type="button" [disabled]="isSubmitDisAllowed(form)" class="btn btn-primary">Submit</button>
      <button (click)='close()' type="button" class="btn btn-danger">Close</button>
    </form>

  </nb-card-body>
</nb-card> -->
<form #form="ngForm" nz-form>
  <nz-tabset>
    <nz-tab nzTitle="General">
        <nz-form-item>
            <nz-form-label nzRequired [nzSpan]="5">Name</nz-form-label>
            <nz-form-control [nzValidateStatus]="isNameInValid(name)?'error':'success'" [nzSpan]="19">
              <input nz-input btAutofocus required [(ngModel)]="newEntity.name" name="name" #name='ngModel'>
              <nz-form-explain *ngIf="isNameInValid(name)"> Name is required! </nz-form-explain>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
            <nz-form-label nzRequired [nzSpan]="5">Category</nz-form-label>
            <nz-form-control [nzValidateStatus]="isCategoryInValid(category)?'error':'success'" [nzSpan]="19">
              <nz-select #category='ngModel' required [(ngModel)]='newEntity.category'
                name='category'>
                <nz-option *ngFor="let category of (_viewPointCategoryService.all$ | async)" [nzLabel]="category.name" [nzValue]="category"></nz-option>
              </nz-select>
              <nz-form-explain *ngIf="isCategoryInValid(category)"> Category is required! </nz-form-explain>
            </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzRequired [nzSpan]="5">Rank</nz-form-label>
          <nz-form-control [nzValidateStatus]="isRankInValid(rank)?'error':'success'" [nzSpan]="19">
            <nz-rate #rank='ngModel' required [(ngModel)]='newEntity.rank'
              name='rank'>
            </nz-rate>
            <nz-form-explain *ngIf="isRankInValid(rank)"> Rank is required! </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzRequired [nzSpan]="5">Time</nz-form-label>
          <nz-form-control [nzValidateStatus]="isTimeNeededInValid(timeNeeded)?'error':'success'" [nzSpan]="19">
            <nz-input-number required [nzAutoFocus]='true' [nzStep]="0.1" [nzPlaceHolder]='"Time"' #timeNeeded='ngModel' required [(ngModel)]='newEntity.timeNeeded'
              name='timeNeeded'>
            </nz-input-number>
            <nz-form-explain *ngIf="isTimeNeededInValid(timeNeeded)"> Time Needed is required! </nz-form-explain>
          </nz-form-control>
        </nz-form-item>
    </nz-tab>
    <nz-tab nzTitle="Location">
      <nz-form-item>
        <nz-form-label nzRequired [nzSpan]="5">City</nz-form-label>
        <nz-form-control [nzValidateStatus]="isCityInValid(city)?'error':'success'" [nzSpan]="19">
          <nz-select #city='ngModel' required [(ngModel)]='newEntity.city' [compareWith]="compareCityFn"
          name='city'>
            <ng-container *ngIf='selectedCity === null'>
              <nz-option *ngFor="let city of (_cityService.all$ | async)" [nzLabel]="city.name" [nzValue]="city"></nz-option>
            </ng-container>
            <ng-container *ngIf='selectedCity !== null'>
              <nz-option [nzLabel]="selectedCity.name" [nzValue]="selectedCity"></nz-option>
            </ng-container>
          </nz-select>
          <nz-form-explain *ngIf="isCityInValid(city)"> City is required! </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzRequired [nzSpan]="5">Address</nz-form-label>
        <nz-form-control [nzValidateStatus]="isAddressInValid(address)?'error':'success'" [nzSpan]="19">
          <input nz-input required [(ngModel)]="newEntity.address" name="address" #address='ngModel'>
          <nz-form-explain *ngIf="isAddressInValid(address)"> Address is required! </nz-form-explain>
        </nz-form-control>
    </nz-form-item>
    </nz-tab>
  </nz-tabset>
</form>